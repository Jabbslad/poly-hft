{"id":"poly-hft-1l2","title":"Wire up paper execution engine","description":"## Description\nConnect the paper execution engine to the signal generator to simulate trades with realistic fills and fee calculation.\n\n## Technical Details\n- Paper engine already implemented in `src/execution/paper.rs`\n- Need to wire it into the main trading loop\n- Connect signal channel to order submission\n- Track fills and update position tracker\n\n## Files to Modify\n- `src/cli/run.rs` - Main trading loop\n- `src/execution/mod.rs` - May need factory for engine selection\n\n## Integration Points\n1. Receive Signal from signal generator\n2. Size position using Kelly criterion\n3. Submit Order to paper engine\n4. Receive Fill confirmation\n5. Update position tracker\n\n## Acceptance Criteria\n- [ ] Signals trigger order submission\n- [ ] Kelly sizing applied correctly\n- [ ] Fills recorded with accurate fees\n- [ ] Position tracker updated on fills\n- [ ] Metrics recorded for each trade\n- [ ] Integration test for signal-to-fill flow\n\n## Dependencies\n- Requires: Signal generator implementation","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T12:21:01.14884256Z","created_by":"jabbslad","updated_at":"2026-01-04T14:17:02.187134956Z","closed_at":"2026-01-04T14:17:02.187134956Z","close_reason":"Implemented paper trading loop in RunArgs::execute() with all components wired together.","dependencies":[{"issue_id":"poly-hft-1l2","depends_on_id":"poly-hft-mlm","type":"parent-child","created_at":"2026-01-04T12:21:06.972546251Z","created_by":"jabbslad"},{"issue_id":"poly-hft-1l2","depends_on_id":"poly-hft-ya9","type":"blocks","created_at":"2026-01-04T12:21:06.994583628Z","created_by":"jabbslad"}]}
{"id":"poly-hft-1n2","title":"Research: Polymarket Integration Questions","description":"## Description\nResearch open questions about Polymarket's behavior that affect trading strategy implementation.\n\n## Goals\n- Understand market mechanics for accurate fair value calculation\n- Determine execution characteristics for realistic backtesting\n- Optimize edge thresholds based on actual costs\n\n## Acceptance Criteria\n- [ ] Document market open price determination\n- [ ] Quantify execution delay behavior\n- [ ] Map out fee structure\n- [ ] Calculate optimal edge thresholds","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-04T12:19:44.930557719Z","created_by":"jabbslad","updated_at":"2026-01-04T15:07:14.976669929Z","closed_at":"2026-01-04T15:07:14.976669929Z","close_reason":"All research complete. Four sub-tasks completed: (1) Execution delay behavior - 500ms taker delay confirmed, (2) Market open price determination - documented, (3) Fee structure - 0% fees on global platform, (4) Edge thresholds - 0.5% validated as optimal. All findings documented in PRD."}
{"id":"poly-hft-2i7","title":"Research: Polymarket execution delay behavior","description":"## Description\nInvestigate the current execution delay behavior on Polymarket CLOB.\n\n## Background\nThere are rumors of ~500ms execution delays on Polymarket. This affects:\n- Edge calculation (need buffer for delay)\n- Order type selection (maker vs taker)\n- Backtest accuracy\n\n## Questions to Answer\n1. What is the typical order-to-fill latency?\n2. Is there intentional delay for HFT prevention?\n3. Does delay vary by order size or type?\n4. How does queue position affect fill time?\n\n## Research Methods\n- Execute test orders on testnet\n- Measure round-trip latencies\n- Analyze order book dynamics\n- Review any public documentation\n\n## Acceptance Criteria\n- [ ] Quantify p50/p95/p99 execution latency\n- [ ] Determine if delay is deterministic or variable\n- [ ] Update signal thresholds if needed\n- [ ] Document findings in PRD","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T12:24:24.524447162Z","created_by":"jabbslad","updated_at":"2026-01-04T14:22:41.565871312Z","closed_at":"2026-01-04T14:22:41.565871312Z","close_reason":"Research complete. Findings documented in PRD - 500ms taker delay confirmed, rate limits documented, recommendations added.","dependencies":[{"issue_id":"poly-hft-2i7","depends_on_id":"poly-hft-1n2","type":"parent-child","created_at":"2026-01-04T12:24:30.901150073Z","created_by":"jabbslad"}]}
{"id":"poly-hft-3f8","title":"Implement spread capture strategy","description":"Replace momentum lag strategy with market-making spread capture approach used by kingofcoinflips.\n\n## Strategy Overview\nBuy BOTH YES and NO sides of the same market when combined cost \u003c $1.00, guaranteeing profit regardless of outcome.\n\n## Key Changes Required\n1. Track both YES and NO order books simultaneously\n2. Detect spread opportunities (yes_ask + no_ask \u003c 0.98)\n3. Execute dual-sided orders rapidly\n4. Small position sizes ($1-5) to avoid moving market\n5. Support any market type (not just 15-min BTC)\n\n## Reference\n- Wallet: 0xe9c6312464b52aa3eff13d822b003282075995c9\n- Pattern: YES @ ~0.56 + NO @ ~0.40 = 0.96 cost → 4% profit","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-04T21:17:51.771689723Z","created_by":"jabbslad","updated_at":"2026-01-04T21:17:51.771689723Z"}
{"id":"poly-hft-3fc","title":"Expand market discovery beyond 15-min BTC","description":"Spread capture works on ANY market with bid-ask inefficiency, not just 15-min BTC.\n\n## Changes\n- Scan multiple market types (daily, hourly, 15-min)\n- Scan multiple assets (BTC, ETH, SOL, etc.)\n- Prioritize markets by spread size and liquidity\n\n## Market Sources\n- Gamma API series IDs for each asset/timeframe\n- Or scan all active markets for spread opportunities\n\n## Files to Modify\n- src/market/gamma.rs\n- src/market/tracker.rs","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T21:18:48.308119789Z","created_by":"jabbslad","updated_at":"2026-01-04T21:18:48.308119789Z","dependencies":[{"issue_id":"poly-hft-3fc","depends_on_id":"poly-hft-3f8","type":"parent-child","created_at":"2026-01-04T21:19:17.637366559Z","created_by":"jabbslad"}]}
{"id":"poly-hft-53l","title":"Complete position tracker with P\u0026L calculation","description":"## Description\nEnhance the position tracker to maintain accurate real-time P\u0026L and support position lifecycle management.\n\n## Technical Details\n- Position tracker exists in `src/risk/position.rs`\n- Need to integrate with order book for mark-to-market\n- Track both realized and unrealized P\u0026L\n- Handle market expiry (position settlement at $1 or $0)\n\n## Files to Modify\n- `src/risk/position.rs` - Enhance position tracking\n- `src/risk/types.rs` - Add P\u0026L types if needed\n\n## Features\n1. Real-time mark-to-market using order book mid price\n2. Realized P\u0026L on position close\n3. Unrealized P\u0026L on open positions\n4. Position settlement on market expiry\n5. Historical P\u0026L tracking\n\n## Acceptance Criteria\n- [ ] Accurate unrealized P\u0026L from mark prices\n- [ ] Correct realized P\u0026L on position close\n- [ ] Handles market expiry (YES pays $1, NO pays $0)\n- [ ] Total P\u0026L aggregation across positions\n- [ ] Metrics exported for monitoring\n- [ ] ≥75% test coverage","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T12:21:34.914515293Z","created_by":"jabbslad","updated_at":"2026-01-04T12:21:34.914515293Z","dependencies":[{"issue_id":"poly-hft-53l","depends_on_id":"poly-hft-82v","type":"parent-child","created_at":"2026-01-04T12:21:40.892915955Z","created_by":"jabbslad"}]}
{"id":"poly-hft-5mw","title":"Performance optimization for low-latency execution","description":"## Description\nOptimize system performance to meet PRD latency requirements for production trading.\n\n## PRD Requirements\n- Price feed latency: \u003c50ms (Binance WS to internal)\n- Signal generation: \u003c10ms (price tick to signal)\n- Order submission: \u003c100ms (signal to order sent)\n\n## Optimization Areas\n1. **Memory**: Reduce allocations on hot path\n2. **Async**: Minimize await points in critical path\n3. **Serialization**: Fast JSON parsing\n4. **Network**: Connection pooling, keep-alive\n5. **Data Structures**: Lock-free where possible\n\n## Profiling\n- Add benchmarks in `benches/`\n- Use flamegraph for CPU profiling\n- Measure p50/p95/p99 latencies\n\n## Acceptance Criteria\n- [ ] Price feed latency \u003c50ms p99\n- [ ] Signal generation \u003c10ms p99\n- [ ] Benchmarks in CI\n- [ ] No regression on optimization changes\n- [ ] Memory usage stable over time\n- [ ] CPU usage reasonable under load","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T12:23:50.001686731Z","created_by":"jabbslad","updated_at":"2026-01-04T12:23:50.001686731Z","dependencies":[{"issue_id":"poly-hft-5mw","depends_on_id":"poly-hft-9xj","type":"parent-child","created_at":"2026-01-04T12:23:55.371262921Z","created_by":"jabbslad"}]}
{"id":"poly-hft-78z","title":"Implement risk manager with position limits","description":"## Description\nComplete the risk manager to enforce position limits, drawdown controls, and trading halts.\n\n## Technical Details\n- Drawdown monitor already exists in `src/risk/limits.rs`\n- Need to integrate with position tracker\n- Enforce max concurrent positions\n- Implement trading halt on drawdown threshold\n\n## Files to Modify\n- `src/risk/limits.rs` - Enhance drawdown monitoring\n- `src/risk/mod.rs` - RiskManager trait implementation\n\n## Risk Controls\n1. Max position size (1% of bankroll per PRD)\n2. Max concurrent positions (configurable)\n3. Daily drawdown limit (halt trading if exceeded)\n4. Per-trade risk limits\n\n## Acceptance Criteria\n- [ ] Rejects orders exceeding position limits\n- [ ] Tracks cumulative drawdown\n- [ ] Halts trading when drawdown threshold hit\n- [ ] Resume mechanism after drawdown recovery\n- [ ] All limits configurable via config.toml\n- [ ] ≥75% test coverage","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T12:21:16.549711296Z","created_by":"jabbslad","updated_at":"2026-01-04T12:21:16.549711296Z","dependencies":[{"issue_id":"poly-hft-78z","depends_on_id":"poly-hft-82v","type":"parent-child","created_at":"2026-01-04T12:21:22.716185771Z","created_by":"jabbslad"}]}
{"id":"poly-hft-82v","title":"Phase 3: Strategy Complete","description":"## Description\nComplete the trading strategy with full risk management, position tracking, and backtesting capabilities. This phase enables end-to-end paper trading with realistic simulation.\n\n## Goals\n- Implement comprehensive risk management\n- Track positions and P\u0026L in real-time\n- Build full backtesting framework with queue simulation\n- Create end-to-end paper trading loop\n\n## Acceptance Criteria\n- [ ] Risk manager enforces position limits and drawdown controls\n- [ ] Position tracker maintains accurate P\u0026L\n- [ ] Backtester replays historical data with realistic fills\n- [ ] Paper trading loop runs autonomously\n- [ ] All components have ≥75% test coverage","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-04T12:19:23.179329371Z","created_by":"jabbslad","updated_at":"2026-01-04T12:19:23.179329371Z"}
{"id":"poly-hft-9me","title":"Implement full backtesting framework","description":"## Description\nComplete the backtesting framework to replay historical data with realistic execution simulation including queue position modeling.\n\n## Technical Details\n- Backtest components exist in `src/backtest/`\n- Need to implement Parquet reading and event merging\n- Queue simulator models order book position\n- Process events through full strategy pipeline\n\n## Files to Modify\n- `src/backtest/replay.rs` - Event stream from Parquet files\n- `src/backtest/simulator.rs` - Main backtest orchestration\n- `src/backtest/execution_model.rs` - Queue position simulation\n- `src/cli/backtest.rs` - CLI command\n\n## Features\n1. Load price ticks and order book from Parquet\n2. Merge into chronological event stream\n3. Simulate queue position for limit orders\n4. Calculate realistic fill probabilities\n5. Generate performance analytics\n\n## Acceptance Criteria\n- [ ] Reads captured Parquet data files\n- [ ] Events replayed in chronological order\n- [ ] Queue position modeled per PRD spec\n- [ ] Fills simulated based on queue advancement\n- [ ] BacktestSummary with PnL, Sharpe, win rate\n- [ ] CLI command `poly-hft backtest` works\n- [ ] ≥75% test coverage","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T12:21:53.435715383Z","created_by":"jabbslad","updated_at":"2026-01-04T12:21:53.435715383Z","dependencies":[{"issue_id":"poly-hft-9me","depends_on_id":"poly-hft-82v","type":"parent-child","created_at":"2026-01-04T12:21:59.924600889Z","created_by":"jabbslad"}]}
{"id":"poly-hft-9xj","title":"Phase 4: Production Ready","description":"## Description\nPrepare the system for live trading with real execution, wallet integration, and production-grade reliability.\n\n## Goals\n- Implement live execution against Polymarket CLOB\n- Integrate wallet for transaction signing\n- Add advanced risk controls for production\n- Optimize performance for low-latency execution\n\n## Acceptance Criteria\n- [ ] Live execution engine submits real orders\n- [ ] Wallet integration signs transactions securely\n- [ ] Advanced risk controls prevent catastrophic losses\n- [ ] Latency meets PRD requirements (\u003c50ms feed, \u003c10ms signal)\n- [ ] System handles network failures gracefully","status":"open","priority":3,"issue_type":"epic","created_at":"2026-01-04T12:19:32.687944542Z","created_by":"jabbslad","updated_at":"2026-01-04T12:19:32.687944542Z"}
{"id":"poly-hft-9yd","title":"Create spread detector module","description":"New module to detect arbitrage opportunities when bid-ask spread allows risk-free profit.\n\n## Logic\n```\nspread_cost = yes_ask + no_ask\nif spread_cost \u003c (1.00 - fees):\n    profit = 1.00 - spread_cost - fees\n    signal = SpreadOpportunity(yes_price, no_price, profit_pct)\n```\n\n## Configuration\n- min_profit_pct: Minimum spread profit to trade (e.g., 2%)\n- max_spread_age_ms: Maximum book staleness\n- fee_rate: Polymarket fee (0.5% per side = 1% total)\n\n## Files to Create\n- src/signal/spread.rs","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T21:18:13.373082744Z","created_by":"jabbslad","updated_at":"2026-01-04T21:18:13.373082744Z","dependencies":[{"issue_id":"poly-hft-9yd","depends_on_id":"poly-hft-3f8","type":"parent-child","created_at":"2026-01-04T21:19:17.489160548Z","created_by":"jabbslad"},{"issue_id":"poly-hft-9yd","depends_on_id":"poly-hft-jd3","type":"blocks","created_at":"2026-01-04T21:19:27.448012315Z","created_by":"jabbslad"}]}
{"id":"poly-hft-a20","title":"Implement live execution engine","description":"## Description\nImplement the live execution engine that submits real orders to Polymarket CLOB.\n\n## Technical Details\n- Implement `ExecutionEngine` trait for live execution\n- Use Polymarket CLOB API for order submission\n- Handle order lifecycle (submit, confirm, cancel)\n\n## Features\n1. Limit order submission\n2. Market order submission\n3. Order cancellation\n4. Order status tracking\n5. Fill notification handling\n\n## Safety Controls\n- Double-check order size limits\n- Confirm execution mode before submitting\n- Rate limiting to avoid API bans\n- Order confirmation logging\n\n## Acceptance Criteria\n- [ ] Submits orders to Polymarket CLOB\n- [ ] Receives fill confirmations\n- [ ] Handles order rejections gracefully\n- [ ] Implements retry logic for transient failures\n- [ ] All orders logged for audit\n- [ ] Kill switch to halt all trading","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T12:22:30.937553331Z","created_by":"jabbslad","updated_at":"2026-01-04T12:22:30.937553331Z","dependencies":[{"issue_id":"poly-hft-a20","depends_on_id":"poly-hft-9xj","type":"parent-child","created_at":"2026-01-04T12:22:37.395352202Z","created_by":"jabbslad"},{"issue_id":"poly-hft-a20","depends_on_id":"poly-hft-82v","type":"blocks","created_at":"2026-01-04T12:22:37.417905926Z","created_by":"jabbslad"}]}
{"id":"poly-hft-bm6","title":"Remove GBM strategy - only use momentum lag exploitation","description":"## Summary\nRemove the GBM (Geometric Brownian Motion) strategy from the codebase. We are now exclusively using the momentum lag exploitation strategy.\n\n## Strategy (from Twitter analysis)\nThe bot runs one process only: Bitcoin Up/Down, same sizing $10K, same timing, repeated thousands of times.\n\n**The logic is mechanical:**\n- Spot moves first on Binance\n- Polymarket lags for 30-90 seconds on 15m windows\n- Bot enters after momentum is already confirmed, while odds still price the previous state\n- Probability is tilted at entry, not guessed\n- Most fills land in the 80-95% range post entry\n\nThis is not prediction and not creativity. It is speed + discipline applied to one repeating micro window.\n\n## Tasks\n- [ ] Remove `Strategy::Gbm` enum variant from `src/signal/orchestrator.rs`\n- [ ] Remove `--strategy` CLI flag (default to momentum)\n- [ ] Remove GBM-specific code paths in signal detection\n- [ ] Update `src/model/gbm.rs` - keep for fair value reference or remove entirely\n- [ ] Remove `SignalDetector` if only used by GBM\n- [ ] Update CLAUDE.md and any other documentation\n- [ ] Update tests to remove GBM-specific test cases\n- [ ] Run `cargo test` and `cargo clippy` to verify","status":"closed","priority":1,"issue_type":"chore","created_at":"2026-01-04T17:56:51.773697546Z","created_by":"jabbslad","updated_at":"2026-01-04T18:09:01.827226031Z","closed_at":"2026-01-04T18:09:01.827226031Z","close_reason":"Closed"}
{"id":"poly-hft-c03","title":"Set up OpenTelemetry with OTLP exporter","description":"## Description\nImplement OpenTelemetry tracing with OTLP exporter for distributed tracing support.\n\n## Technical Details\n- File: `src/telemetry/tracing_setup.rs`\n- Export traces to configurable OTLP endpoint\n- Integrate with existing tracing setup\n\n## Features\n1. OTLP exporter configuration\n2. Span context propagation\n3. Trace sampling configuration\n4. Service name and version tags\n\n## Acceptance Criteria\n- [ ] Traces exported to OTLP endpoint\n- [ ] Configurable via telemetry config\n- [ ] Graceful fallback if endpoint unavailable\n- [ ] Key operations instrumented with spans","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T12:25:11.179466976Z","created_by":"jabbslad","updated_at":"2026-01-04T12:25:11.179466976Z"}
{"id":"poly-hft-e66","title":"Research: Polymarket market open price determination","description":"## Description\nInvestigate how Polymarket determines the market open price for BTC up/down markets.\n\n## RESOLVED ✓\n\nFor **1-hour BTC Up/Down markets** (series: `btc-up-or-down-hourly`):\n\n### Resolution Mechanism\nFrom market description:\n\u003e This market will resolve to \"Up\" if the close price is greater than or equal to the open price for the BTC/USDT 1 hour candle that begins on the time and date specified in the title. Otherwise, this market will resolve to \"Down\".\n\n### Price Source\n- **Source**: Binance BTC/USDT pair\n- **URL**: https://www.binance.com/en/trade/BTC_USDT\n- **Candle**: 1-hour (\"1H\") candle\n- **Open price**: The \"O\" (Open) value displayed at top of chart\n- **Close price**: The \"C\" (Close) value displayed at top of chart\n\n### Resolution Logic\n```\nif close \u003e= open:\n    resolve(\"Up\")\nelse:\n    resolve(\"Down\")\n```\n\n### Timing\n- Market title specifies exact hour (e.g., \"January 4, 7AM ET\")\n- Uses the Binance 1-hour candle starting at that time\n- Resolution occurs after candle is finalized\n\n### Implications for Strategy\n- No need for complex open price detection - use Binance candle data directly\n- Fair value model should use Binance 1H candle open as reference\n- Can use RTDS crypto_prices feed for real-time Binance prices","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T12:24:07.691353432Z","created_by":"jabbslad","updated_at":"2026-01-04T13:09:19.076919251Z","closed_at":"2026-01-04T13:09:19.076919251Z","close_reason":"Closed","dependencies":[{"issue_id":"poly-hft-e66","depends_on_id":"poly-hft-1n2","type":"parent-child","created_at":"2026-01-04T12:24:13.41465338Z","created_by":"jabbslad"}]}
{"id":"poly-hft-j2j","title":"Implement dual-sided order execution","description":"Execute both YES and NO orders simultaneously when spread opportunity detected.\n\n## Requirements\n- Send both orders atomically (or as close as possible)\n- Both orders must fill for profit to be realized\n- Handle partial fills gracefully\n- Track combined position P\u0026L\n\n## Risk Management\n- If only one side fills, we have directional exposure\n- Consider: cancel unfilled side after timeout\n- Consider: IOC (immediate-or-cancel) order type\n\n## Files to Modify\n- src/execution/ (new or modified)\n- src/cli/run.rs","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T21:18:26.084463805Z","created_by":"jabbslad","updated_at":"2026-01-04T21:18:26.084463805Z","dependencies":[{"issue_id":"poly-hft-j2j","depends_on_id":"poly-hft-3f8","type":"parent-child","created_at":"2026-01-04T21:19:17.539998419Z","created_by":"jabbslad"},{"issue_id":"poly-hft-j2j","depends_on_id":"poly-hft-9yd","type":"blocks","created_at":"2026-01-04T21:19:27.507601444Z","created_by":"jabbslad"}]}
{"id":"poly-hft-jd3","title":"Track both YES and NO order books","description":"Modify orderbook client to subscribe to both YES and NO token books for each market.\n\n## Current State\n- Only subscribes to YES token book\n- NO book data not captured\n\n## Changes Needed\n- Subscribe to both token IDs from market (yes_token_id and no_token_id)\n- Store both books in orchestrator state\n- Calculate NO price as direct book price (not 1 - YES)\n\n## Files to Modify\n- src/orderbook/client.rs\n- src/signal/orchestrator.rs","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T21:18:02.770376056Z","created_by":"jabbslad","updated_at":"2026-01-04T21:18:02.770376056Z","dependencies":[{"issue_id":"poly-hft-jd3","depends_on_id":"poly-hft-3f8","type":"parent-child","created_at":"2026-01-04T21:19:17.425102467Z","created_by":"jabbslad"}]}
{"id":"poly-hft-ker","title":"Implement Polymarket WebSocket client for order book","description":"## Description\nImplement the Polymarket WebSocket client in `src/orderbook/client.rs` to stream real-time order book updates.\n\n## Technical Details\n- WebSocket URL: `wss://ws-subscriptions-clob.polymarket.com/ws/`\n- Subscribe to order book channel for specific token IDs\n- Handle both snapshots and delta updates\n- Use the shared `WsClient` from `src/ws/` for connection management\n\n## Files to Modify\n- `src/orderbook/client.rs` - WebSocket client implementation\n- `src/orderbook/book.rs` - May need updates for delta application\n\n## Message Format\nSubscribe: `{\"type\": \"subscribe\", \"channel\": \"book\", \"market\": \"\u003ctoken_id\u003e\"}`\nUpdates contain bids/asks arrays with price levels\n\n## Acceptance Criteria\n- [ ] `subscribe(token_id)` returns channel of `OrderBook` updates\n- [ ] Handles initial snapshot correctly\n- [ ] Applies delta updates to maintain book state\n- [ ] Automatic reconnection on disconnect (via WsClient)\n- [ ] Unit tests with mocked WebSocket\n- [ ] ≥75% test coverage for new code\n\n## References\n- Polymarket docs: https://docs.polymarket.com/llms.txt\n- PRD section: Module 2.4 Order Book","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T12:20:25.276514273Z","created_by":"jabbslad","updated_at":"2026-01-04T14:17:00.180510658Z","closed_at":"2026-01-04T14:17:00.180510658Z","close_reason":"Implemented PolymarketClient with WebSocket subscription, book snapshots, and price change deltas.","dependencies":[{"issue_id":"poly-hft-ker","depends_on_id":"poly-hft-mlm","type":"parent-child","created_at":"2026-01-04T12:20:30.474126701Z","created_by":"jabbslad"}]}
{"id":"poly-hft-kwb","title":"Research: Optimal edge threshold calculation","description":"## Description\nCalculate the optimal edge threshold accounting for fees, slippage, and execution probability.\n\n## Factors to Consider\n1. **Trading Fees**: Taker/maker fees\n2. **Slippage**: Market impact of order size\n3. **Execution Probability**: Queue position, fill rate\n4. **Volatility**: Price movement during execution\n5. **Opportunity Cost**: Missing trades vs bad fills\n\n## Formula Development\n```\nmin_edge = fees + expected_slippage + volatility_buffer + safety_margin\n```\n\n## Acceptance Criteria\n- [ ] Derive formula for minimum profitable edge\n- [ ] Calculate based on actual fee structure\n- [ ] Backtest with different thresholds\n- [ ] Update config.toml with optimal defaults\n- [ ] Document reasoning in PRD","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T12:24:55.005992633Z","created_by":"jabbslad","updated_at":"2026-01-04T15:07:01.276173478Z","closed_at":"2026-01-04T15:07:01.276173478Z","close_reason":"Research complete. Findings: Current 0.5% min edge threshold validated as optimal. Break-even is ~0.3% (fees + slippage + execution volatility), with 67% safety margin built in. Documented in PRD with recommendations for maker/taker/near-expiry scenarios.","dependencies":[{"issue_id":"poly-hft-kwb","depends_on_id":"poly-hft-1n2","type":"parent-child","created_at":"2026-01-04T12:25:00.470914299Z","created_by":"jabbslad"},{"issue_id":"poly-hft-kwb","depends_on_id":"poly-hft-zhi","type":"blocks","created_at":"2026-01-04T12:25:00.493616028Z","created_by":"jabbslad"},{"issue_id":"poly-hft-kwb","depends_on_id":"poly-hft-2i7","type":"blocks","created_at":"2026-01-04T12:25:00.512943086Z","created_by":"jabbslad"}]}
{"id":"poly-hft-mks","title":"Remove momentum lag strategy code","description":"Clean up momentum-specific code after spread capture is implemented.\n\n## Files to Remove/Modify\n- src/signal/momentum.rs - Remove or keep as optional\n- src/signal/lag.rs - Remove\n- src/signal/orchestrator.rs - Replace momentum logic with spread logic\n\n## Keep for Reference\n- Binance feed (might still be useful)\n- Chainlink feed (not needed for spread capture)\n- Order book infrastructure (reuse)","status":"open","priority":2,"issue_type":"chore","created_at":"2026-01-04T21:18:58.024011147Z","created_by":"jabbslad","updated_at":"2026-01-04T21:18:58.024011147Z","dependencies":[{"issue_id":"poly-hft-mks","depends_on_id":"poly-hft-3f8","type":"parent-child","created_at":"2026-01-04T21:19:17.683768228Z","created_by":"jabbslad"},{"issue_id":"poly-hft-mks","depends_on_id":"poly-hft-t8p","type":"blocks","created_at":"2026-01-04T21:19:27.601657437Z","created_by":"jabbslad"}]}
{"id":"poly-hft-mlm","title":"Phase 2: Market Integration","description":"## Description\nIntegrate with Polymarket APIs to enable real-time market data and order book access. This phase connects the bot to Polymarket's Gamma API for market discovery and WebSocket CLOB for order book updates.\n\n## Goals\n- Discover active 15-minute BTC up/down markets via Gamma API\n- Stream real-time order book updates via Polymarket WebSocket\n- Generate trading signals from fair value vs market price\n- Execute paper trades with simulated fills\n\n## Acceptance Criteria\n- [ ] Gamma API client discovers active markets\n- [ ] WebSocket client streams order book updates\n- [ ] Signal generator produces actionable signals\n- [ ] Paper execution engine simulates trades\n- [ ] All components have ≥75% test coverage","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-04T12:19:12.398786625Z","created_by":"jabbslad","updated_at":"2026-01-04T14:17:11.52970315Z","closed_at":"2026-01-04T14:17:11.52970315Z","close_reason":"Phase 2 complete: Gamma API, WebSocket client, Signal Orchestrator, Paper Execution all implemented with tests and benchmarks."}
{"id":"poly-hft-nuc","title":"Integrate wallet for transaction signing","description":"## Description\nIntegrate wallet functionality for signing transactions when executing live trades.\n\n## Technical Details\n- Polymarket uses Polygon network\n- Need to sign EIP-712 typed data for orders\n- Secure key management required\n\n## Security Requirements\n1. Private key never in plaintext in memory longer than needed\n2. Hardware wallet support (optional)\n3. Key derivation from seed phrase\n4. Environment variable or file-based key loading\n\n## Acceptance Criteria\n- [ ] Signs orders for Polymarket CLOB\n- [ ] Supports loading key from environment\n- [ ] Supports loading key from encrypted file\n- [ ] No plaintext keys in logs or error messages\n- [ ] Works with Polymarket testnet first\n- [ ] Documentation for key setup","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T12:23:16.898215892Z","created_by":"jabbslad","updated_at":"2026-01-04T12:23:16.898215892Z","dependencies":[{"issue_id":"poly-hft-nuc","depends_on_id":"poly-hft-9xj","type":"parent-child","created_at":"2026-01-04T12:23:21.873745458Z","created_by":"jabbslad"},{"issue_id":"poly-hft-nuc","depends_on_id":"poly-hft-a20","type":"blocks","created_at":"2026-01-04T12:23:21.895922965Z","created_by":"jabbslad"}]}
{"id":"poly-hft-t8p","title":"Small position sizing for spread capture","description":"Change position sizing from fixed $10K to small rapid trades ($1-5).\n\n## Rationale\n- Large orders move the market, eliminating the spread\n- Small orders can capture spread without impact\n- Higher frequency, lower size = same volume\n\n## Configuration\n- base_size_usd: $2-5 per leg\n- max_concurrent_positions: Higher limit (e.g., 50)\n- cooldown_ms: Minimum time between trades on same market\n\n## Reference (kingofcoinflips pattern)\n- Trades every 2-4 seconds\n- $1-3 USDC per trade\n- Both sides simultaneously","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-04T21:18:38.078684162Z","created_by":"jabbslad","updated_at":"2026-01-04T21:18:38.078684162Z","dependencies":[{"issue_id":"poly-hft-t8p","depends_on_id":"poly-hft-3f8","type":"parent-child","created_at":"2026-01-04T21:19:17.58920872Z","created_by":"jabbslad"},{"issue_id":"poly-hft-t8p","depends_on_id":"poly-hft-j2j","type":"blocks","created_at":"2026-01-04T21:19:27.557060587Z","created_by":"jabbslad"}]}
{"id":"poly-hft-ug0","title":"Implement Gamma API client for 1-hour BTC market discovery","description":"## Description\nImplement the Gamma API client in `src/market/gamma.rs` to discover active **1-hour BTC up/down markets** on Polymarket.\n\n## Key Discovery: Simplified Approach\n\nThe markets are accessible via the Gamma API `/series` endpoint:\n```\nGET https://gamma-api.polymarket.com/series\n```\n\nFilter for: `slug: btc-up-or-down-hourly`, `recurrence: hourly`\n\nThe series response includes all events (markets) with their condition IDs, token IDs, and expiry times.\n\n## Market Structure\n\n- **Series slug**: `btc-up-or-down-hourly`\n- **Outcomes**: \"Up\" / \"Down\"\n- **Resolution**: Binance BTC/USDT 1-hour candle (close \u003e= open = Up)\n- **Tags**: `1H`, `Up or Down`, `Bitcoin`, `Crypto`\n\n## Technical Details\n\n- Base URL: `https://gamma-api.polymarket.com`\n- Endpoints:\n  - `GET /series` - List all series, filter by slug/recurrence\n  - `GET /markets?condition_ids=0x...` - Get specific market details\n- Parse response into `Market` structs\n\n## Files to Modify\n\n- `src/market/gamma.rs` - Main implementation\n- `src/market/tracker.rs` - Market tracking integration\n\n## Acceptance Criteria\n\n- [ ] `fetch_current_btc_hourly_market()` returns the active 1-hour BTC market\n- [ ] Market struct contains: condition_id, token_ids (up/down), expiry time, event_start_time\n- [ ] Handles API errors gracefully with retries\n- [ ] Unit tests with mocked responses\n- [ ] Integration test against live API (can be ignored in CI)\n- [ ] ≥75% test coverage for new code\n\n## API Examples\n\n```bash\n# Get series info\ncurl https://gamma-api.polymarket.com/series | jq '.[] | select(.slug == \"btc-up-or-down-hourly\")'\n\n# Get market by condition ID\ncurl 'https://gamma-api.polymarket.com/markets?condition_ids=0x40ddfd4541041cc63364a7bd0107e72cb297b660d767349adbf5c6a045ca0dda'\n```\n\n## References\n\n- Polymarket docs: https://docs.polymarket.com/llms.txt\n- PRD section: Module 2.2 Market Discovery","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T12:19:57.829719627Z","created_by":"jabbslad","updated_at":"2026-01-04T14:16:58.885733001Z","closed_at":"2026-01-04T14:16:58.885733001Z","close_reason":"Implemented GammaClient with fetch_btc_markets() and fetch_current_btc_hourly_market(). Includes wiremock tests.","dependencies":[{"issue_id":"poly-hft-ug0","depends_on_id":"poly-hft-mlm","type":"parent-child","created_at":"2026-01-04T12:20:13.985865389Z","created_by":"jabbslad"}]}
{"id":"poly-hft-uzs","title":"Implement advanced production risk controls","description":"## Description\nAdd production-grade risk controls beyond basic position limits for safe live trading.\n\n## Features\n1. **Kill Switch**: Immediately halt all trading\n2. **Circuit Breakers**: Auto-halt on unusual conditions\n3. **Position Limits**: Hard caps enforced at order level\n4. **Loss Limits**: Daily/weekly loss thresholds\n5. **Execution Monitoring**: Alert on unusual fills\n\n## Circuit Breaker Triggers\n- Rapid loss (X% in Y minutes)\n- Unusual spread widening\n- Feed latency spike\n- Execution delays\n- Error rate threshold\n\n## Acceptance Criteria\n- [ ] Kill switch stops all trading immediately\n- [ ] Circuit breakers auto-trigger on thresholds\n- [ ] All limits configurable\n- [ ] Alerts sent on trigger (log, webhook)\n- [ ] Manual reset required after circuit breaker\n- [ ] Audit log of all risk events","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-04T12:23:32.493450507Z","created_by":"jabbslad","updated_at":"2026-01-04T12:23:32.493450507Z","dependencies":[{"issue_id":"poly-hft-uzs","depends_on_id":"poly-hft-9xj","type":"parent-child","created_at":"2026-01-04T12:23:38.450537167Z","created_by":"jabbslad"},{"issue_id":"poly-hft-uzs","depends_on_id":"poly-hft-a20","type":"blocks","created_at":"2026-01-04T12:23:38.471358277Z","created_by":"jabbslad"}]}
{"id":"poly-hft-wdw","title":"Implement end-to-end paper trading loop","description":"## Description\nCreate the main paper trading loop that ties all components together into an autonomous trading system.\n\n## Technical Details\n- CLI entry point in `src/cli/run.rs`\n- Orchestrate all modules in async runtime\n- Handle graceful shutdown\n\n## Components to Wire\n1. Binance WebSocket feed (price ticks)\n2. Polymarket WebSocket (order book)\n3. Market tracker (active markets)\n4. Volatility estimator (price history)\n5. GBM model (fair value)\n6. Signal detector (trading signals)\n7. Signal filter (risk checks)\n8. Kelly sizer (position sizing)\n9. Paper engine (simulated execution)\n10. Position tracker (P\u0026L)\n11. Data recorder (Parquet capture)\n12. Metrics exporter (Prometheus)\n\n## Acceptance Criteria\n- [ ] `poly-hft run` starts paper trading\n- [ ] All components initialized and connected\n- [ ] Signals generated and trades executed\n- [ ] P\u0026L tracked and logged\n- [ ] Graceful shutdown on SIGINT/SIGTERM\n- [ ] Reconnection on feed disconnect\n- [ ] Status output shows current state\n\n## Dependencies\n- Requires: All Phase 2 components\n- Requires: Risk manager\n- Requires: Position tracker","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T12:22:12.721501439Z","created_by":"jabbslad","updated_at":"2026-01-04T12:22:12.721501439Z","dependencies":[{"issue_id":"poly-hft-wdw","depends_on_id":"poly-hft-82v","type":"parent-child","created_at":"2026-01-04T12:22:20.483039819Z","created_by":"jabbslad"},{"issue_id":"poly-hft-wdw","depends_on_id":"poly-hft-mlm","type":"blocks","created_at":"2026-01-04T12:22:20.504314561Z","created_by":"jabbslad"},{"issue_id":"poly-hft-wdw","depends_on_id":"poly-hft-78z","type":"blocks","created_at":"2026-01-04T12:22:20.523471624Z","created_by":"jabbslad"},{"issue_id":"poly-hft-wdw","depends_on_id":"poly-hft-53l","type":"blocks","created_at":"2026-01-04T12:22:20.541081486Z","created_by":"jabbslad"}]}
{"id":"poly-hft-ya9","title":"Complete signal generator implementation","description":"## Description\nComplete the signal generator to produce actionable trading signals by comparing fair value from GBM model against market prices.\n\n## Technical Details\n- Combine BTC spot price from Binance feed with Polymarket order book\n- Use GBM model to calculate P(up) fair value\n- Compare against best bid/ask to determine edge\n- Apply signal filters before emitting\n\n## Files to Modify\n- `src/signal/detector.rs` - Signal detection logic (partially implemented)\n- `src/signal/filter.rs` - Signal filtering (implemented, may need tuning)\n\n## Data Flow\n1. Receive PriceTick from Binance feed\n2. Receive OrderBook from Polymarket WebSocket\n3. Calculate fair value using GbmModel\n4. Compute edge = fair_value - market_price\n5. Apply filters (edge threshold, liquidity, volatility, time-to-expiry)\n6. Emit Signal if filters pass\n\n## Acceptance Criteria\n- [ ] Signal detector combines spot price and order book\n- [ ] Fair value calculated correctly using GBM model\n- [ ] Edge computed against best bid (for YES) or best ask (for NO)\n- [ ] All configured filters applied\n- [ ] Signals emitted via channel to execution engine\n- [ ] ≥75% test coverage\n\n## Dependencies\n- Requires: Gamma API client (market discovery)\n- Requires: Polymarket WebSocket (order book)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T12:20:43.573867778Z","created_by":"jabbslad","updated_at":"2026-01-04T14:17:01.130898758Z","closed_at":"2026-01-04T14:17:01.130898758Z","close_reason":"Implemented SignalOrchestrator combining price feed, order book, and market tracker with async select loop.","dependencies":[{"issue_id":"poly-hft-ya9","depends_on_id":"poly-hft-mlm","type":"parent-child","created_at":"2026-01-04T12:20:50.198328105Z","created_by":"jabbslad"},{"issue_id":"poly-hft-ya9","depends_on_id":"poly-hft-ug0","type":"blocks","created_at":"2026-01-04T12:20:50.220198111Z","created_by":"jabbslad"},{"issue_id":"poly-hft-ya9","depends_on_id":"poly-hft-ker","type":"blocks","created_at":"2026-01-04T12:20:50.238935756Z","created_by":"jabbslad"}]}
{"id":"poly-hft-zhi","title":"Research: Polymarket fee structure","description":"## Description\nDocument the current Polymarket fee structure for takers vs makers.\n\n## Questions to Answer\n1. What is the taker fee percentage?\n2. What is the maker fee/rebate?\n3. Are there volume discounts?\n4. How are fees calculated (on notional or shares)?\n\n## Why It Matters\nFees directly impact edge calculation. A 0.5% edge with 0.5% fees = no profit.\n\n## Acceptance Criteria\n- [ ] Document current fee schedule\n- [ ] Update config.toml defaults\n- [ ] Factor fees into signal threshold\n- [ ] Add fee calculation to paper engine","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T12:24:39.810295919Z","created_by":"jabbslad","updated_at":"2026-01-04T15:04:50.577461674Z","closed_at":"2026-01-04T15:04:50.577461674Z","close_reason":"Research complete. Findings: Polymarket global platform has 0% trading fees (taker and maker). Polymarket US has 0.01% taker fee. Documentation added to PRD, FeeConfig added to config.rs with defaults of 0.0.","dependencies":[{"issue_id":"poly-hft-zhi","depends_on_id":"poly-hft-1n2","type":"parent-child","created_at":"2026-01-04T12:24:45.35238252Z","created_by":"jabbslad"}]}
